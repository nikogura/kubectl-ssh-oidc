issuer: http://localhost:5556/dex

storage:
  type: memory

expiry:
  signingKeys: "1m"  # Force key rotation every minute to create multiple keys
  idTokens: "1h"

web:
  http: 0.0.0.0:5556

logger:
  level: "debug"

connectors:
- type: ssh
  id: ssh
  name: SSH Key Authentication
  config:
    users:
      "test-user":
        keys:
        - "${TEST_KEY_FINGERPRINT_1}"
        - "${TEST_KEY_FINGERPRINT_2}"
        - "${TEST_KEY_FINGERPRINT_3}"
        username: "test-user"
        email: "test-user@example.com"
        groups:
        - "developers"
        - "kubernetes-users"
      "another-user":
        keys:
        - "SHA256:4wMtClwjjbq6znF1DhoRTijpisje/QNkdfujTrNT8NE"
        username: "another-user"
        email: "another-user@example.com"
        groups:
        - "admins"
    
    allowed_issuers:
    - "kubectl-ssh-oidc"
    
    allowed_clients:
    - "kubectl-ssh-oidc"
    
    default_groups:
    - "authenticated"
    
    token_ttl: 3600

staticClients:
- id: kubectl-ssh-oidc
  redirectURIs:
  - 'urn:ietf:wg:oauth:2.0:oob'
  name: 'kubectl SSH OIDC'
  secret: ZXhhbXBsZS1hcHAtc2VjcmV0